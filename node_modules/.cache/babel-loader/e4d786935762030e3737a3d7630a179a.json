{"ast":null,"code":"const apiKey = '64cd41892fdef05b98e839364f94a25b';\nvar genresList = [];\nconst TheMovieDB = {\n  getGenresList() {\n    return fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${apiKey}`).then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      throw new Error('Request failed!');\n    }, networkError => {\n      console.log(networkError.message);\n    }).then(jsonResponse => {\n      return jsonResponse.genres;\n    });\n  },\n\n  search(term) {\n    this.getGenresList().then(genres => genresList = genres);\n    console.log(genresList);\n    return fetch(`https://api.themoviedb.org/3/search/movie?api_key=${apiKey}&query=${term}`).then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      throw new Error('Request failed!');\n    }, networkError => {\n      console.log(networkError.message);\n    }).then(jsonResponse => {\n      return jsonResponse.results.map(film => {\n        return {\n          id: film.id,\n          title: film.title,\n          year: film.release_date.substr(0, 4),\n          releaseDay: film.release_date,\n          genres: film.genre_ids.map(id => genresList.find(genre => genre.id === id).name),\n          imgSrc: 'https://image.tmdb.org/t/p/original' + film.poster_path,\n          description: film.overview,\n          rating: film.vote_average,\n          video: film.video\n        };\n      });\n    });\n  }\n\n};\nexport default TheMovieDB;","map":{"version":3,"sources":["/home/mrzero/Documents/Code/React_Projects/filmsearcher/src/util/TheMovieDB.js"],"names":["apiKey","genresList","TheMovieDB","getGenresList","fetch","then","response","ok","json","Error","networkError","console","log","message","jsonResponse","genres","search","term","results","map","film","id","title","year","release_date","substr","releaseDay","genre_ids","find","genre","name","imgSrc","poster_path","description","overview","rating","vote_average","video"],"mappings":"AAAA,MAAMA,MAAM,GAAG,kCAAf;AACA,IAAIC,UAAU,GAAG,EAAjB;AACA,MAAMC,UAAU,GAAG;AACfC,EAAAA,aAAa,GAAE;AACX,WAAOC,KAAK,CAAE,yDAAwDJ,MAAO,EAAjE,CAAL,CACEK,IADF,CACOC,QAAQ,IAAI;AACd,UAAGA,QAAQ,CAACC,EAAZ,EAAe;AACX,eAAOD,QAAQ,CAACE,IAAT,EAAP;AACH;;AACD,YAAM,IAAIC,KAAJ,CAAU,iBAAV,CAAN;AACH,KANF,EAMIC,YAAY,IAAI;AACfC,MAAAA,OAAO,CAACC,GAAR,CAAYF,YAAY,CAACG,OAAzB;AACH,KARF,EAQIR,IARJ,CAQSS,YAAY,IAAI;AACpB,aAAOA,YAAY,CAACC,MAApB;AACH,KAVF,CAAP;AAWH,GAbc;;AAefC,EAAAA,MAAM,CAACC,IAAD,EAAM;AACR,SAAKd,aAAL,GAAqBE,IAArB,CAA0BU,MAAM,IAAId,UAAU,GAAGc,MAAjD;AACAJ,IAAAA,OAAO,CAACC,GAAR,CAAYX,UAAZ;AACA,WAAOG,KAAK,CAAE,qDAAoDJ,MAAO,UAASiB,IAAK,EAA3E,CAAL,CAAmFZ,IAAnF,CAAwFC,QAAQ,IAAI;AACvG,UAAGA,QAAQ,CAACC,EAAZ,EAAe;AACX,eAAOD,QAAQ,CAACE,IAAT,EAAP;AACH;;AACD,YAAM,IAAIC,KAAJ,CAAU,iBAAV,CAAN;AACH,KALM,EAKJC,YAAY,IAAI;AACfC,MAAAA,OAAO,CAACC,GAAR,CAAYF,YAAY,CAACG,OAAzB;AACH,KAPM,EAOJR,IAPI,CAOCS,YAAY,IAAI;AACpB,aAAOA,YAAY,CAACI,OAAb,CAAqBC,GAArB,CAAyBC,IAAI,IAAI;AAChC,eAAM;AACFC,UAAAA,EAAE,EAAYD,IAAI,CAACC,EADjB;AAEFC,UAAAA,KAAK,EAASF,IAAI,CAACE,KAFjB;AAGFC,UAAAA,IAAI,EAAUH,IAAI,CAACI,YAAL,CAAkBC,MAAlB,CAAyB,CAAzB,EAA2B,CAA3B,CAHZ;AAIFC,UAAAA,UAAU,EAAIN,IAAI,CAACI,YAJjB;AAKFT,UAAAA,MAAM,EAAQK,IAAI,CAACO,SAAL,CAAeR,GAAf,CAAmBE,EAAE,IAAIpB,UAAU,CAAC2B,IAAX,CAAgBC,KAAK,IAAIA,KAAK,CAACR,EAAN,KAAaA,EAAtC,EAA0CS,IAAnE,CALZ;AAMFC,UAAAA,MAAM,EAAQ,wCAAwCX,IAAI,CAACY,WANzD;AAOFC,UAAAA,WAAW,EAAGb,IAAI,CAACc,QAPjB;AAQFC,UAAAA,MAAM,EAAQf,IAAI,CAACgB,YARjB;AASFC,UAAAA,KAAK,EAASjB,IAAI,CAACiB;AATjB,SAAN;AAWP,OAZM,CAAP;AAaH,KArBM,CAAP;AAsBH;;AAxCc,CAAnB;AA2CA,eAAenC,UAAf","sourcesContent":["const apiKey = '64cd41892fdef05b98e839364f94a25b';\nvar genresList = [];\nconst TheMovieDB = {\n    getGenresList(){\n        return fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${apiKey}`)\n                .then(response => {\n                    if(response.ok){\n                        return response.json();\n                    }\n                    throw new Error('Request failed!');\n                }, networkError => {\n                    console.log(networkError.message);\n                }).then(jsonResponse => {\n                    return jsonResponse.genres;\n                })\n    },\n\n    search(term){\n        this.getGenresList().then(genres => genresList = genres);\n        console.log(genresList);\n        return fetch(`https://api.themoviedb.org/3/search/movie?api_key=${apiKey}&query=${term}`).then(response => {\n            if(response.ok){\n                return response.json();\n            }\n            throw new Error('Request failed!');\n        }, networkError => {\n            console.log(networkError.message);\n        }).then(jsonResponse => {\n            return jsonResponse.results.map(film => {\n                    return{\n                        id          : film.id,\n                        title       : film.title,\n                        year        : film.release_date.substr(0,4),\n                        releaseDay  : film.release_date,\n                        genres      : film.genre_ids.map(id => genresList.find(genre => genre.id === id).name),\n                        imgSrc      : 'https://image.tmdb.org/t/p/original' + film.poster_path,\n                        description : film.overview,\n                        rating      : film.vote_average,\n                        video       : film.video\n                    };\n            });\n        })\n    }\n}\n\nexport default TheMovieDB;"]},"metadata":{},"sourceType":"module"}